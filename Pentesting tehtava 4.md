





						Pentesting Tehtävä 4





1) Korkkaa Poison. Jos et pääse root shelliin asti, kuvaile, mihin pääsit ja mitä johtolankoja jäi tutkimatta.

Ikävä kyllä HackThe Box sivuston, VPN -yhteydessä on ollut jatkuvasti ongelmia, ja tämä kohta on vielä täten tekemättä.

20.9.2018 vpn toimii, katsotaan mitä keretään tehdä Poisonin suhteen:

	korjaus toimi 1min ajan ja taas katkaisi yhteyden poikki.



2) CTF walktrough. Katso Youtubesta jokin CTF walktrough (muu kuin HackTheBox). Mitä opit, mitä ideoita sait? Kokeile vähintään kolmea itsellesi uutta työkalua, joita opit videosta.
VASTAUS:
Jos/kun tutkitaan http sivua ja saamme ilmoituksen webselaimessa sen toimimisesta. On hyvä tarkistaa, että onko http serveri oikeasti käytössä?

	Dirbuster nimisellä ohjelmalla: annetaan http:n osoite IP-muodossa ja lisätään dirbusterin oma sanalista, jonka avulla etsitään itse ohjelmaa käyttäen mahdollisesti piilotettuja kansioita mistä ei ole suoraan infoa.

MUUTA:
https://github.com/pentestmonkey
Todella hyödyllinen linkki ja uusi työkalu pen testien pariin tulevaisuudessa.
 windows/unix-privesc-check  -scripti. Kyseisen scriptin avulla

Kokeillaan saadaanko edellä mainittujen ohjelmien avulla root oikeudet, jollekin HackThe Box verkon koneelle?

>	Ikävä kyllä VPN yhteys on jatkuvasti nikotellut HackTheBox sivustolle, yritän vielä myöhemmin jos yhteys toimii mutta jos ei niin tämä kohta jää valitettavasti tekemättä.







3) Stuxnet. Lue artikkeli Stuxnetista, esim. Symantec tai Langer. Voit hakea ‘stuxnet analysis’. 1) Miten Stuxnet murtautui koneille? Yleisluontoinen vastaus (mikä hyökkäys millekin käyttöjärjestelmälle mihin komponenttiin) riittää, koska nämä hyökkäykset ovat jo vanhentuneet. 2) Miten ohjaus (command and control, C2) toimi? 3) Miten Stuxnet ylitti ilmaraon (air gap)?
VASTAUS:
Hyväksi käyttämällä neljää nollapäivä haavoittuvuutta (versio 1.1). Tarkemmin sanottuna lyhyesti:

”Although the initial basic operation of Stuxnet reflects the classical malware actions (network 
vulnerability exploitation, rootkit installation, data exfiltration, Internet 
self upgrade, etc ”

Stuxnet, oli kirjoitettu niin että se kulkeutui Windows tietokoneen kautta, vahingoittamatta itse konetta ja kohdistaen hyökkäyksensä Siemensin valmistamaan PLC:hen.

Hyökkäys muotona tiedosto oli periaatteessa iso kokoinen DLL -tiedosto.



Hyökkäysreitit olivat:

Paikallinen verkko, USB-median kautta tai Siemens ohjelman. STEP 7 kohdassa kirjoittamalla omaa koodia ajettavaksi.

Kun Stuxnet mato on päässyt koneelle ja saanut itsensä kopioitua on seuraava vaihe madolla yrittää ottaa yhteyttä etäserveriin. Yritys tehdään etsimällä aktiivinen internet yhteys ja pyritään saamaan pystyyn http -istunto. Joka tehdään hakemalla vaikkapa www.windowsupdate.com osoitetta.

Jonka jälkeen yhteys otetaan toiseen osoitteeseen, josta vastaanotetaan ja lähetetään komentoja.

Jonka jälkeen yhteys otetaan uuteen osoitteeseen ja lähetetään dataa, koskien konetta jonka mato on vallannut.

Itse ilmarako ohitettiin, puhtaasti inhimillisten ominaisuuksien vuoksi. Ensin tartutettiin koneet paikassa X, josta mato saatiin tartutettua USB-medialle esimerkiksi, josta se saattoi levitä maalikohteeseensa. USB-mediaa ei älytty tarkastaa virusten/matojen/troijalaisten varalta, tai sitä ei huomattu madon laadun takia. 






Linkki:

https://ccdcoe.org/sites/default/files/multimedia/pdf/Falco2012_StuxnetFactsReport.pdf



